{% extends 'template.html' %}


{% block content %}
{% load static %}


<div class="card" style="margin-top: 10px;">
    <div class="card-body">
      <h5 class="card-title">{{ question.title }}</h5>
      <p>{{ question.content|safe }}</p>
      <div class="row">
        <a href="#" class="col-md-6 text-left">{{ question.author.username }}</a>
        <div class="col-md-6 text-right">

      <div>
        <div class="votecell post-layout--left">
          {% csrf_token %}
          <button id="question-vote-up" class="grid--cell s-btn s-btn__unset c-pointer" type="button"
          data-href="{{ question.getVoteUrl }}"
          data-question="{{ question.id }}"
            data-controller="s-tooltip" data-s-tooltip-placement="right" title="سوال مفید و واضح است" aria-pressed="True" aria-label="Up vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowUpLg" width="20" height="20" viewBox="0 0 36 36"><path d="M2 26h32L18 10 2 26z"/></svg></button>
        <div id="question-counter" class="grid--cell fc-black-500 fs-title grid fd-column ai-center" itemprop="upvoteCount">{{ question.getVoteState }}</div>
          {% csrf_token %}
          <button id="question-vote-down" class="grid--cell s-btn s-btn__unset c-pointer" type="button"
          data-href="{{ question.getVoteUrl }}"
          data-question="{{ question.id }}" 
            data-controller="s-tooltip" data-s-tooltip-placement="right" title="سوال مفید یا واضح نیست" aria-pressed="false" aria-label="Down vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowDownLg" width="20" height="20" viewBox="0 0 36 36"><path d="M2 10h32L18 26 2 10z"/></svg></button>
      </div>

        {% if request.user == question.author %}
          <a href="{% url 'QA:question_edit' id=question.id  %}" class="btn btn-primary">Edit</a>  
          <a href="{% url 'QA:question_delete' id=question.id %}" class="btn btn-danger">Delete</a>  
        {% endif %}  
          
        </div>
      </div>

    </div>
  </div> 
</div>



  {% for answer in answers %}

    <div class="card w-75" style="margin-top: 10px;">
      
  
  
  

      <div class="row">

        <div class="card-body">
            <p>{{ answer.content|safe }}</p>

              <div class="votecell post-layout--left">
                {% csrf_token %}
                <button element-up-id="answer-vote-up-{{ answer.id }}" class="grid--cell s-btn s-btn__unset c-pointer" type="button"
                  data-href="{{ answer.getVoteUrl }}"
                  data-answer="{{ answer.id }}"
                  data-controller="s-tooltip" data-s-tooltip-placement="right" title="سوال مفید و واضح است" aria-pressed="false" aria-label="Up vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowUpLg" width="20" height="20" viewBox="0 0 36 36"><path d="M2 26h32L18 10 2 26z"/></svg></button>
              
                  <div id="answer-{{ answer.id }}-counter" class="grid--cell fc-black-500 fs-title grid fd-column ai-center" itemprop="upvoteCount">{{ answer.getVoteState }}</div>
                  {% csrf_token %}
              
                <button element-down-id="answer-vote-down-{{ answer.id }}" class="grid--cell s-btn s-btn__unset c-pointer" type="button"
                  data-href="{{ answer.getVoteUrl }}" 
                  data-answer="{{ answer.id }}" 
                  data-controller="s-tooltip" data-s-tooltip-placement="right" title="سوال مفید یا واضح نیست" aria-pressed="false" aria-label="Down vote" data-selected-classes="fc-theme-primary"><svg aria-hidden="true" class="m0 svg-icon iconArrowDownLg" width="20" height="20" viewBox="0 0 36 36"><path d="M2 10h32L18 26 2 10z"/></svg></button>
            </div>
      
          <div class="row">
            <a href="#" class="col-md-6 text-left">{{ answer.author.username }}</a>
            {% if request.user == answer.author %}
              <div class="col-md-6 text-right">
                <a href="{% url 'QA:answer_edit' q_id=question.id a_id=answer.id %}" class="btn btn-primary">Edit</a>  
                <a href="{% url 'QA:answer_delete' q_id=question.id a_id=answer.id %}" class="btn btn-danger">Delete</a>  
              </div>
            {% endif %}
          </div>

          {% if request.user == question.author %}


          <div>
            <button
              answer-id="answer-{{ answer.id }}"
              data-href="{{ answer.getAnswerApproveUrl }}"
              data-answers="{{question.getApprovedAnswerId}}"
              data-answer-id="{{ answer.id }}" 
              data-title-accept="Accept this answer if it solved your problem or was the most helpful in finding your solution"
              data-title-unaccept="You accepted this answer 19 hours ago (select to undo)"
              >

              <div id="answer-{{answer.id}}-approve" >
                <img  width="40" height="40" src="{{ answer.isApproved }}" alt="{{ answer.isApproved }}">
              </div>

            </button>          
  
           
          </div>
          {% endif %}
  
              {% if request.user != question.author and answer == approved_answer.answer %}
                <img  width="40" height="40" src="{% static 'image/approved.svg' %}" alt="approved answer"">
                  
              {% endif %}

          </div>    

        </div> 
      </div> 


    {% empty %}

        <p>There is no answer for this question</p>

    {% endfor %}


    {% if user.is_authenticated and not user_answered %}
        <h3>Write answer to this question</h3>
        <div id="is_answered">
          <form method="post" action="" enctype="multipart/form-data">
        
            {% csrf_token %}
            {{ answer_form.media }}
            {{ answer_form.as_p }}


            <input type="submit" name="submit" value="Submit" />

        </form>

        </div>

    {% endif %}

    

<pre>
  <div id="preview" style="min-height: 60px;"></div>
</pre>

  


{% block scripts %}
  {% load static %}    
  <script src="{% static 'script/jquery.js' %}"></script>
  <script src="{% static 'script/vote.js' %}"></script>
  <script src="{% static 'script/custom.js' %}"></script>
{% endblock scripts %}
  






{% endblock content %}
    


